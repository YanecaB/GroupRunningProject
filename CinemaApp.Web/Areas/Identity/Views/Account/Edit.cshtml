@using CinemaApp.Web.ViewModels.User;
@*@using Microsoft.AspNetCore.Identity
    @using CinemaApp.Data.Models
        TODO: USE THIS AND CHECK IF THE PATH IS EMPTY IN THE DATABASE BECAUSE THE PROBLEM IS THAT WHEN WE DON'T ADD NEW IMG THE RELOADING AFTER THE ERROR WILL BE WITH THE EMPTY PATH
    @inject UserManager<ApplicationUser> UserManager*@


@model ApplicationUserEditProfileViewModel

@{
    ViewData["Title"] = "Edit Profile";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Helvetica+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Global Styles */
        body {
            font-family: 'Helvetica Neue', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fafafa; /* Instagram-like background */
            color: #333;
        }

        /* Header Styling */
        #page-header {
            background-color: #fff;
            color: #333;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

            #page-header h1 {
                font-size: 2.2em;
                font-weight: 700;
                margin: 0;
            }

        /* Edit Profile Section Styling */
        #edit-profile-section {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            max-width: 900px;
            margin: 0 auto;
            background-color: #fff;
            padding: 40px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }

            #edit-profile-section img {
                width: 120px;
                height: 120px;
                border-radius: 50%;
                object-fit: cover;
                border: 3px solid #ddd;
            }

        /* Form Inputs Styling */
        .form-group {
            width: 100%;
            margin-bottom: 20px;
        }

            .form-group label {
                font-weight: bold;
                margin-bottom: 10px;
                display: block;
            }

            .form-group input, .form-group textarea {
                width: 100%;
                padding: 12px;
                border-radius: 5px;
                border: 1px solid #ddd;
                font-size: 1em;
            }

            .form-group textarea {
                height: 100px;
            }

            .form-group input[type="file"] {
                padding: 10px;
            }

        /* Button Styling */
        #save-profile-btn {
            background-color: #0095f6;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease;
            width: 100%;
            text-align: center;
        }

            #save-profile-btn:hover {
                background-color: #007bb5;
            }

        img {
            width: 120px;
            height: 120px;
            border-radius: 50%; /* Round profile picture */
            object-fit: cover;
            border: 3px solid #ddd;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header id="page-header">
        <h1>Edit Your Profile</h1>
    </header>

    <!-- Edit Profile Section -->
    <div id="edit-profile-section">
        <!-- Profile Picture

        <img src="Model.ProfilePictureUrl" alt="Profile Picture" id="profile-img">
        -->
        <!-- Profile Edit Form -->
        <form method="post" enctype="multipart/form-data">
            @Html.AntiForgeryToken()

            <input type="hidden" name="Id" value="@Model.Id" />

            <!-- Display Existing Profile Picture -->
            @if (!string.IsNullOrEmpty(Model.ExistingProfilePicturePath))
            {
                <div class="form-group">
                    <img src="@Model.ExistingProfilePicturePath" alt="Profile Picture" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 2px solid #ddd;" />
                </div>
            }

            <!-- Upload New Profile Picture -->
            <div class="form-group">
                <label for="ProfilePicturePath">Change Profile Picture</label>
                <input type="file" id="ProfilePicturePath" name="ProfilePicturePath" accept="image/*" />
            </div>

            <!-- Username Input -->
            <div class="form-group">
                <label for="Username">Username</label>
                <input type="text" id="Username" name="Username" value="@Model.Username" required />
                <span asp-validation-for="Username" class="text-danger"></span>
            </div>

            <!-- Bio Input -->
            <div class="form-group">
                <label for="Bio">Bio</label>
                <textarea id="Bio" name="Bio">@Model.Bio</textarea>
                <span asp-validation-for="Bio" class="text-danger"></span>
            </div>

            <!-- Save Button -->
            <button type="submit" id="save-profile-btn">Save changes</button>
        </form>
    </div>
</body>
</html>

@*

    <label asp-for="Title"></label>
    <input asp-for="Title" />
    

*@